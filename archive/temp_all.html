<!--
query=this.query
searchURL=`https://archive.org/advancedsearch.php?q={query}`
addBookmarkURL=`https://archive.org/bookmarks.php?add_bookmark=1&amp;mediatype=search&amp;identifier={query}&amp;title={query}`
mediatypes={"collection": "collections", "texts": "texts". "audio": "audio", "movies": "movies", "etree": "concerts", "image": "images" }
React.root = "http://archive.org"; // Where URLs think the root is
searchMorfURL=`https://archive.org/search.php?query={query}&morf=mediatype`
loanStatuses=["NULL": "Always Available", "AVAILABLE": "Available to Borrow", "UNAVAILABLE": "Waitlist"];
relatedSubjects=["Egyptology","IFAQ"]; // TODO-DETAILS-ASKATIA Where does this list of related subjects come from
collectionNumbers = {"opensource": 398, "americana": 192} // TODO-DETAILS Calculate this from results
collectionTitles = {"opensource": "Community Texts", "americana": "American Libraries"}   // TODO-DETAILS-ASKATIA where to get collection titles
creatorNumbers = { "institut+d'egypte": 35} //TODO-DETAILS calculate this
languageNumbers = {"French": 422} //TODO-DETAILS calculate this
-->
<!-- Begin page content -->
<div class="container container-ia width-max"
     style="background-color:#d8d8d8; padding-top:60px; border:1px solid #979797; padding-bottom:25px;">
    <div class="container">
        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-1 hidden-xs">
                <h3 style="margin:3px 0 0 0; text-align:right;">Search</h3>
            </div>
            <div class="col-sm-8 col-md-8 col-lg-9">
                <div class="searchbar" style="margin-bottom:10px; margin-right:60px;">
                    {/*--TODO-DETAILS change this form into a advancedsearch query--*/}
                    <form class="form search-form js-search-form"
                          id="searchform"
                          method="get"
                          role="search"
                          action="https://archive.org/searchresults.php"
                          data-event-form-tracking="Search|SearchForm"
                          data-wayback-machine-search-url="https://web.archive.org/web/*/">
                        <div class="form-group" style="position:relative">
                            <div style="position:relative">
                                <span aria-hidden="true">
                                  <span class="iconochive-search" style="position:absolute;left:4px;top:7px;color:#999;font-size:125%"
                                        aria-hidden="true"></span><span class="sr-only">search</span>            </span>
                                <input class="form-control input-sm roundbox20 js-search-bar" size="25" name="search"
                                       placeholder="Search" type="text" value={query}
                                       style="font-size:125%;padding-left:30px;"
                                       onclick="$(this).css('padding-left','').parent().find('.iconochive-search').hide()"
                                       aria-controls="search_options"
                                       aria-label="Search the Archive. Filters and Advanced Search available below."
                                />
                            </div>

                            <div
                                    id="search_options"
                                    class="search-options js-search-options is-open"
                                    aria-expanded="true"
                                    aria-label="Search Options"
                                    data-keep-open-when-changed="true"
                            >
                                <fieldset>
                                    <label><input type="radio" name="sin" value="" checked>Search metadata</label>
                                    <label><input type="radio" name="sin" value="TXT">Search full text of books</label>
                                    <label><input type="radio" name="sin" value="TV">Search TV captions</label>
                                    <label><input type="radio" name="sin" value="WEB">Search archived web sites</label>
                                </fieldset>
                                <a href={searchURL} class="search-options__advanced-search-link">Advanced Search</a>
                            </div>

                            <button class="btn btn-gray label-primary input-sm"
                                    style="position:absolute;right:-60px;top:0;"
                                    type="submit">GO
                            </button>
                            <input type="hidden" name="limit" value="100"/>
                            <input type="hidden" name="start" value="0"/>
                            <input type="hidden" name="searchAll" value="yes"/>
                            <input type="hidden" name="submit" value="this was submitted"/>
                        </div><!--/.form-group -->
                    </form>
                </div><!--/.searchbar-->
            </div>
            <div id="search-actions" class="col-sm-2 col-md-2 col-lg-2">
                <span class="iconochive-share" aria-hidden="true"></span><span class="sr-only">share</span> Share<br/>
                <a class="stealth"
                   href={addbookmarkURL}
                   onclick="return AJS.modal_go(this,{favorite:1})"
                   data-target="#confirm-modal"><span class="iconochive-favorite" aria-hidden="true"></span><span
                        class="sr-only">favorite</span> Favorite</a><br/>
            </div>
        </div><!--/.row-->
    </div><!--/.container-->
</div>
<div class="container container-ia nopad">
    <div class="row">
        <div class="columns-facets">
            <h3 class="co-top-row">
                nnn{/*--TODO need total--*/}
                <div class="topinblock micro-label" style="padding-top:2px">RESULTS</div>
            </h3>

            <h5>Media Type</h5>
            <div>
                <div class="fatable facet-mediatype">
                    {Object.keys(mediatypes).map((mt) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query: query, "and": 'mediatype:"${mt}"'})`}
                        </div>
                        <div class="facell">n{/*--need number of each--*/}</div>
                        <span class="facell">{mediatypes[mt]}</span>
                    </div>
                    ))}
                </div>
            </div>
            <a href={searchMorfURL} rel="nofollow" onclick="return AJS.morf(this)">More
                <span class="iconochive-right-solid" aria-hidden="true"></span><span class="sr-only">right-solid</span></a>
            <div>
            </div>
            <h5>Availability</h5>
            <div>
                <div class="fatable facet-loans__status__status">
                    {Object.keys(loanStatuses).map((ls) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query:query, "and":"loans__status__status:"${ls}"})`}
                        </div>
                        <div class="facell">nn{/*--TODO need number--*/}</div>
                        <span class="facell">{loanStatuses[ls]</span>
                    </div>
                    ))}
                </div>
            </div>
            <h5>Topics &amp; Subjects <a href={`/search.php?query=${query}&morf=-subject`}
                                         onclick="return AJS.morf(this,'-subject')"><img class="filter-"
                                                                                         data-toggle="tooltip"
                                                                                         title="Show sorted alphabetically"
                                                                                         src="/images/filter-count.png"></a>
            </h5>
            {/*--TODO-DETAILS-ASKATIA unclear where this list comes from check other examples --*/}
            {/*--TODO-DETAILS check onclick URL works - it doesn't look quite right--*/}
            <div>
                <div class="fatable facet-subject">
                    {relatedSubjects.map((s) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query:query, "and": "subject:${relatedSubjects[s]}"})`}/>
                        </div>
                        <div class="facell">
                            nn{/*--TODO-DETAILS-ASKATIA where does number come from--*/}
                        </div>
                        <span class="facell">{relatedSubjects[s]}</span>
                    </div>
                </div>
            </div>
            <a href={`/search.php?query=${query}&morf=subject`} rel="nofollow" onclick="return AJS.morf(this)">More
                <span class="iconochive-right-solid" aria-hidden="true"></span><span class="sr-only">right-solid</span></a>
            <div>
            </div>
            <h5>Collection</h5>

            <div>
                <div class="fatable facet-collection">
                    {Object.keys(collectionNumbers).map((collectionItemid) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query:query, "and": "collection:${collectionItemid}"})`}/>
                        </div>
                        <div class="facell">{collectionNumbers[collectionItemid]}</div>
                        <span class="facell">
                                <a onclick={`Nav.nav_details("${collectionItemid}")`}
                                   data-event-click-tracking='Facets|FacetCollectionLink'>${collectionTitles[collectionItemid]}</a>
                            </span>
                    </div>
                    ))}
                </div>
            </div>
            {/*--TODO-DETAILS check what AJS.morf does--*/}
            <a href={`/search.php?query=${query}&morf=collection`} rel="nofollow" onclick="return AJS.morf(this)">More
                <span class="iconochive-right-solid" aria-hidden="true"></span><span class="sr-only">right-solid</span></a>
            <div>
            </div>
            <h5>Creator <a href={`/search.php?query=${query}&morf=-creator`}
                           onclick="return AJS.morf(this,'-creator')"><img
                    class="filter-" data-toggle="tooltip" title="Show sorted alphabetically"
                    src="/images/filter-count.png"></a></h5>
            <div>
                <div class="fatable facet-creator">
                    {creatorNumbers.map((creatorName) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query: query, "and": "creator:${creatorName}"})`}/>
                        </div>
                        <div class="facell">{creatorNumbers[creatorName]}</div>
                        <span class="facell">{creatorName}</span>
                    </div>
                    ))}
                </div>
            </div>
            <a href={`/search.php?query=${query}&morf=creator`} rel="nofollow" onclick="return AJS.morf(this)">More
                <span class="iconochive-right-solid" aria-hidden="true"></span><span class="sr-only">right-solid</span></a>
            <div>
            </div>
            <h5>Language</h5>
            <div>
                <div class="fatable facet-languageSorter">
                    {Object.keys(languageNumbers).map((languageName) => (
                    <div class="farow">
                        <div class="facell">
                            <input type="checkbox"
                                   onclick={`Nav.nav_search({query:query, "and": "anguageSorter:${languageName}"})`}/>
                        </div>
                        <div class="facell">{languageNumbers[languageName]}</div>
                        <span class="facell">{languageName}</span>
                    </div>
                    ))}
                </div>
            </div>
            <a href={`/search.php?query=${query}&morf=languageSorter`} rel="nofollow" onclick="return AJS.morf(this)">More
                <span class="iconochive-right-solid" aria-hidden="true"></span><span class="sr-only">right-solid</span></a>
            <div>
            </div>
        </div><!--/.columns-facets-->

        <div class="columns-items">

            <div class="co-top-row">
                <div class="sortbar">
                    <a href="#" class="focus-on-child-only pull-right" onclick="return AJS.tiles_toggle(this,'search')">
                        <div class="lists-button topinblock iconochive-list" data-toggle="tooltip"
                             title="Show&nbsp;as&nbsp;list"></div>
                    </a>
                    <a href="#" class="focus-on-child-only pull-right" onclick="return AJS.tiles_toggle(this,'search')">
                        <div class="tiles-button topinblock iconochive-tiles" data-toggle="tooltip"
                             title="Show&nbsp;thumbnails"></div>
                    </a>
                    <div class="hidden-xs hidden-sm pull-right" style="height:50px;width:30px;"></div>
                    <div class="micro-label pull-right hidden-tiles">
                        <input type="checkbox" name="showdetails" onchange="AJS.showdetails_toggle(this,'search')"/>
                        <span class="hidden-xs-span">SHOW </span><span>DETAILS</span>
                    </div>

                    <div class="up-down">
                        <div class="iconochive-up-solid disabled" aria-hidden="true"></div>
                        <span class="sr-only">up-solid</span>
                        <div class="iconochive-down-solid disabled" aria-hidden="true"></div>
                        <span class="sr-only">down-solid</span></div>
                    <div class="topinblock">
                        <div class="hidden-md hidden-lg">
                            <select class="ikind-mobile form-control" onchange="AJS.ikind_mobile_change(this)">
                                <option data-id="relevance" selected="selected">RELEVANCE</option>
                                <option data-id="views">VIEWS</option>
                                <option data-id="title">TITLE</option>
                                <option data-id="date-archived">DATE ARCHIVED</option>
                                <option data-id="date-published">DATE PUBLISHED</option>
                                <option data-id="date-reviewed">DATE REVIEWED</option>
                                <option data-id="creator">CREATOR</option>
                            </select>
                        </div>
                    </div>
                    <div class="topinblock">
                        <div class="hidden-xs hidden-sm">
                            <div class="sort-by">
                                SORT BY
                            </div>
                            <span class="big-label blue-pop">
                                <a class="ikind stealth in" data-id="relevance" onClick={`Nav.nav_search({query:query)`}>RELEVANCE</a>
                                <div class="iconochive-dot ikind-sep"></div>
                                <a class="ikind stealth" data-id="views" onClick={`Nav.nav_search({query:query, "sort": "-downloads"})`}>VIEWS</a>
                                <div class="iconochive-dot ikind-sep"></div>
                                <a class="ikind stealth" data-id="title" onClick={`Nav.nav_earch({query:query. "sort": "titleSorter"})`}>TITLE</a>
                                <div class="iconochive-dot ikind-sep"></div>
                                <a class="ikind stealth" id="date_switcher" data-id="date-archived"
                                   onClick={`Nav.nav_search({query:query, sort="-publicdate" })`}>DATE ARCHIVED</a>
                                <div class="iconochive-dot ikind-sep hidden"></div>
                                <a class="ikind stealth hidden" data-id="date-published"
                                   onClick={`Nav.nav_search{query:query, "sort": "-date"})`}>DATE PUBLISHED</a>
                                <div class="iconochive-dot ikind-sep hidden"></div>
                                <a class="ikind stealth hidden" data-id="date-reviewed"
                                   onClick={`Nav.nav_search({query:query, "sort": "-reviewdate"})`}>DATE REVIEWED</a>
                                <div class="iconochive-dot ikind-sep"></div>
                                <a class="ikind stealth" data-id="creator"
                                   onClick={`Nav.nav_search(${query+"&amp;sort=creatorSorter"})`}>CREATOR</a>
                            </span>
                        </div>
                    </div>
                </div><!--/.sortbar-->
                <div class="sortbar-rule"></div>
            </div><!--/.co-top-row-->


            <div style="position:relative">
                <div id="ikind-search" class="ikind in">

                    <div class="results">
                        <div class="item-ia mobile-header hidden-tiles" data-id="__mobile_header__">
                            <div class="views C C1">
                                <span class="iconochive-eye" aria-hidden="true"></span><span class="sr-only">eye</span>
                            </div>
                            <div class="C234">
                                <div class="C C2">Title</div>
                                <div class="pubdate C C3">
                                    <div>
                                        <div>Date Archived</div>
                                    </div>
                                </div>
                                <div class="by C C4">Creator</div>
                            </div>
                            <div class="C C5"></div>
                        </div>
                        XXX TILES GO HERE
                    </div><!--/.results-->
                    <center class="more_search">
                    {/*--TODO-DETAILS check what is happening in AJS.more_search with this URL and can use page: this.page+1--*/}
                    <a class="btn btn-info btn-sm" style="visibility:hidden"
                       onclick="return AJS.more_search(this,{`/search.php?query=${query}&page=`},1)" href="#">MORE
                        RESULTS</a><br/>
                    <span class="more-search-fetching">Fetching more results <img src="/images/loading.gif"/></span>
                    </center>
                </div>
            </div>

        </div><!--.columns-items-->
    </div><!--/.row-->


</div>
